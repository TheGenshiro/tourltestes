<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ToURL - Ultra Modern File Upload</title>
<script src="https://cdn.tailwindcss.com"></script>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
/>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');

  body {
    font-family: 'Orbitron', sans-serif;
    background: rgba(10, 10, 20, 0.85);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    min-height: 100vh;
    margin: 0;
    color: #00fff7;
  }

  /* Glassmorphism container */
  .glass {
    background: rgba(10, 10, 20, 0.3);
    border-radius: 1rem;
    border: 1.5px solid rgba(0, 255, 255, 0.25);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    box-shadow:
      0 0 10px rgba(0, 255, 255, 0.3),
      0 0 30px rgba(128, 0, 255, 0.2);
  }

  /* Neon glowing border */
  .neon-border {
    border: 2px solid;
    border-image-slice: 1;
    border-width: 2px;
    border-image-source: linear-gradient(45deg, #00fff7, #a100ff);
    box-shadow:
      0 0 8px #00fff7,
      0 0 20px #a100ff;
  }

  /* Neon glowing button */
  .btn-neon {
    background: linear-gradient(135deg, #00fff7, #a100ff);
    color: #0a0a14;
    font-weight: 700;
    font-size: 1.25rem;
    padding: 1rem 2.5rem;
    border-radius: 1.25rem;
    border: none;
    cursor: pointer;
    box-shadow:
      0 0 10px #00fff7,
      0 0 20px #a100ff;
    transition: all 0.3s ease;
    user-select: none;
    text-shadow:
      0 0 5px #00fff7,
      0 0 10px #a100ff;
  }
  .btn-neon:hover {
    box-shadow:
      0 0 20px #00fff7,
      0 0 40px #a100ff,
      0 0 30px #00fff7 inset;
    transform: scale(1.05);
    color: #0a0a14;
    text-shadow:
      0 0 10px #00fff7,
      0 0 20px #a100ff;
  }
  .btn-neon:active {
    transform: scale(0.95);
    box-shadow:
      0 0 15px #00fff7 inset,
      0 0 30px #a100ff inset;
  }

  /* File card */
  .file-card {
    background: rgba(10, 10, 20, 0.25);
    border-radius: 1rem;
    border: 1.5px solid rgba(128, 0, 255, 0.3);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    box-shadow:
      0 0 8px rgba(128, 0, 255, 0.3),
      0 0 15px rgba(0, 255, 255, 0.2);
    padding: 1rem 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    color: #00fff7;
    transition: background-color 0.3s ease;
  }
  .file-card:hover {
    background: rgba(10, 10, 20, 0.4);
    box-shadow:
      0 0 12px rgba(128, 0, 255, 0.5),
      0 0 25px rgba(0, 255, 255, 0.4);
  }
  .file-icon {
    flex-shrink: 0;
    width: 48px;
    height: 48px;
    filter: drop-shadow(0 0 2px #00fff7);
  }
  .file-info {
    flex-grow: 1;
    overflow: hidden;
  }
  .file-name {
    font-weight: 700;
    font-size: 1.1rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .file-link {
    color: #a100ff;
    font-weight: 700;
    font-size: 0.9rem;
    text-decoration: none;
    user-select: text;
    word-break: break-all;
  }
  .file-link:hover {
    text-decoration: underline;
  }

  /* Scroll container for file list */
  .file-list {
    max-height: 320px;
    overflow-y: auto;
    padding-right: 0.5rem;
  }
  .file-list::-webkit-scrollbar {
    width: 8px;
  }
  .file-list::-webkit-scrollbar-track {
    background: transparent;
  }
  .file-list::-webkit-scrollbar-thumb {
    background: #a100ff88;
    border-radius: 4px;
  }

  /* Responsive adjustments */
  @media (max-width: 640px) {
    .btn-neon {
      font-size: 1rem;
      padding: 0.75rem 2rem;
    }
    .file-card {
      padding: 0.75rem 1rem;
    }
    .file-icon {
      width: 40px;
      height: 40px;
    }
    .file-name {
      font-size: 1rem;
    }
    .file-link {
      font-size: 0.8rem;
    }
  }
</style>
</head>
<body class="flex flex-col min-h-screen items-center justify-center p-6 bg-gradient-to-tr from-[#0a0a14] via-[#0a0a14cc] to-[#0a0a14]">

  <main class="glass neon-border max-w-3xl w-full p-8 flex flex-col gap-8 shadow-lg">
    <h1 class="text-center text-4xl sm:text-5xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-700 select-none">
      ToURL
    </h1>

    <section class="flex flex-col sm:flex-row items-center gap-6">
      <label for="file-upload" class="btn-neon cursor-pointer flex items-center justify-center gap-3 w-full sm:w-auto select-none" tabindex="0" role="button" aria-label="Select files to upload">
        <i class="fas fa-upload fa-lg"></i> Select Files
      </label>
      <input type="file" id="file-upload" multiple class="hidden" aria-hidden="true" />
      <button id="upload-btn" class="btn-neon w-full sm:w-auto" disabled aria-disabled="true" aria-label="Upload selected files">
        <i class="fas fa-cloud-upload-alt fa-lg"></i> Upload
      </button>
    </section>

    <section>
      <h2 class="text-cyan-400 font-bold text-xl mb-4 select-none">Uploaded Files</h2>
      <div id="file-list" class="file-list flex flex-col gap-4" aria-live="polite" aria-relevant="additions"></div>
    </section>
  </main>

<script>
  const fileInput = document.getElementById('file-upload');
  const uploadBtn = document.getElementById('upload-btn');
  const fileList = document.getElementById('file-list');

  // Utility: create neon glowing SVG file icon
  function createFileIcon() {
    const svgNS = "http://www.w3.org/2000/svg";
    const svg = document.createElementNS(svgNS, "svg");
    svg.setAttribute("viewBox", "0 0 64 64");
    svg.setAttribute("aria-hidden", "true");
    svg.setAttribute("focusable", "false");
    svg.classList.add("file-icon");
    svg.style.filter = "drop-shadow(0 0 2px #00fff7)";

    const rect = document.createElementNS(svgNS, "rect");
    rect.setAttribute("x", "12");
    rect.setAttribute("y", "8");
    rect.setAttribute("width", "40");
    rect.setAttribute("height", "48");
    rect.setAttribute("rx", "6");
    rect.setAttribute("ry", "6");
    rect.setAttribute("fill", "none");
    rect.setAttribute("stroke", "#00fff7");
    rect.setAttribute("stroke-width", "3");
    rect.setAttribute("filter", "drop-shadow(0 0 4px #00fff7)");

    const line1 = document.createElementNS(svgNS, "line");
    line1.setAttribute("x1", "20");
    line1.setAttribute("y1", "20");
    line1.setAttribute("x2", "44");
    line1.setAttribute("y2", "20");
    line1.setAttribute("stroke", "#a100ff");
    line1.setAttribute("stroke-width", "2");
    line1.setAttribute("stroke-linecap", "round");

    const line2 = document.createElementNS(svgNS, "line");
    line2.setAttribute("x1", "20");
    line2.setAttribute("y1", "30");
    line2.setAttribute("x2", "44");
    line2.setAttribute("y2", "30");
    line2.setAttribute("stroke", "#a100ff");
    line2.setAttribute("stroke-width", "2");
    line2.setAttribute("stroke-linecap", "round");

    const line3 = document.createElementNS(svgNS, "line");
    line3.setAttribute("x1", "20");
    line3.setAttribute("y1", "40");
    line3.setAttribute("x2", "36");
    line3.setAttribute("y2", "40");
    line3.setAttribute("stroke", "#a100ff");
    line3.setAttribute("stroke-width", "2");
    line3.setAttribute("stroke-linecap", "round");

    svg.appendChild(rect);
    svg.appendChild(line1);
    svg.appendChild(line2);
    svg.appendChild(line3);

    return svg;
  }

  // Format bytes to human readable
  function formatBytes(bytes) {
    if (bytes === 0) return '0 B';
    const k = 1024;
    const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
  }

  // Upload files to backend API (uguu.se)
  async function uploadFile(file) {
    // Using uguu.se API: https://uguu.se/api.php?d=upload-tool
    // POST form-data: file=<file>
    // Response: JSON with file URL or error
    const formData = new FormData();
    formData.append('file', file);

    try {
      const response = await fetch('https://uguu.se/api.php?d=upload-tool', {
        method: 'POST',
        body: formData,
      });
      if (!response.ok) {
        throw new Error(`Upload failed with status ${response.status}`);
      }
      const text = await response.text();
      // uguu.se returns plain text URL on success
      if (text.startsWith('http')) {
        return text.trim();
      } else {
        throw new Error('Unexpected response: ' + text);
      }
    } catch (error) {
      throw error;
    }
  }

  // Create file card element
  function createFileCard(name, size, url) {
    const card = document.createElement('div');
    card.className = 'file-card';
    card.tabIndex = 0;
    card.setAttribute('role', 'group');
    card.setAttribute('aria-label', `Uploaded file ${name}, size ${formatBytes(size)}`);

    const icon = createFileIcon();
    icon.setAttribute('aria-hidden', 'true');

    const info = document.createElement('div');
    info.className = 'file-info';

    const fileName = document.createElement('div');
    fileName.className = 'file-name';
    fileName.textContent = name;

    const fileLink = document.createElement('a');
    fileLink.className = 'file-link';
    fileLink.href = url;
    fileLink.target = '_blank';
    fileLink.rel = 'noopener noreferrer';
    fileLink.textContent = url;
    fileLink.setAttribute('aria-label', `Download link for ${name}`);

    info.appendChild(fileName);
    info.appendChild(fileLink);

    card.appendChild(icon);
    card.appendChild(info);

    return card;
  }

  // State: uploaded files array
  const uploadedFiles = [];

  // Update upload button state
  function updateUploadButton() {
    uploadBtn.disabled = fileInput.files.length === 0;
    uploadBtn.setAttribute('aria-disabled', uploadBtn.disabled.toString());
  }

  // Clear file input
  function clearFileInput() {
    fileInput.value = '';
    updateUploadButton();
  }

  // Show notification (subtle toast)
  function showNotification(message, isError = false) {
    const notif = document.createElement('div');
    notif.textContent = message;
    notif.className = `fixed bottom-6 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-lg font-bold text-sm select-none z-50 transition-opacity duration-500 ${
      isError ? 'bg-red-700 text-red-300' : 'bg-cyan-700 text-cyan-100'
    } shadow-lg`;
    document.body.appendChild(notif);
    setTimeout(() => {
      notif.style.opacity = '0';
      setTimeout(() => notif.remove(), 500);
    }, 3000);
  }

  // Handle upload click
  uploadBtn.addEventListener('click', async () => {
    if (fileInput.files.length === 0) return;

    uploadBtn.disabled = true;
    uploadBtn.setAttribute('aria-disabled', 'true');
    uploadBtn.textContent = 'Uploading...';

    for (let i = 0; i < fileInput.files.length; i++) {
      const file = fileInput.files[i];
      try {
        const url = await uploadFile(file);
        uploadedFiles.push({ name: file.name, size: file.size, url });
        const card = createFileCard(file.name, file.size, url);
        fileList.prepend(card);
        showNotification(`Uploaded: ${file.name}`);
      } catch (error) {
        showNotification(`Failed to upload ${file.name}`, true);
      }
    }

    clearFileInput();
    uploadBtn.textContent = 'Upload';
  });

  // Enable upload button on file select
  fileInput.addEventListener('change', () => {
    updateUploadButton();
  });

  // Accessibility: allow label to be keyboard accessible
  const fileLabel = document.querySelector('label[for="file-upload"]');
  fileLabel.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      fileInput.click();
    }
  });
</script>
</body>
</html>